<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Development Planning</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/paraiso-dark.css" /><script type="text/javascript" src="highlight/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with the <a href="https://github.com/billosys/superhero-codox-theme">Bootswatch Superhero</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">sockets</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="00-planning.html"><div class="inner"><span>Development Planning</span></div></a></li><li class="depth-1 "><a href="99-other-versions.html"><div class="inner"><span>API Docs (All Versions)</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sockets</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datagram</span></div></div></li><li class="depth-3 branch"><a href="sockets.datagram.packet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>packet</span></div></a></li><li class="depth-3"><a href="sockets.datagram.socket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>socket</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#development-planning" name="development-planning"></a>Development Planning</h1>
<h2><a href="#first-iteration" name="first-iteration"></a>First Iteration</h2>
<ol>
  <li>Take a slightly different approach to Java wrapping than what  <a href="https://github.com/atroche/clj-sockets">clj-sockets</a> and  <a href="https://github.com/bguthrie/async-sockets">async-sockets</a> have done:</li>
</ol>
<ul>
  <li>Follow the Java class taxonomy closely for low-level protocols  and implementations</li>
  <li>Provide a higher-level, more deveoloper-facing (developer-friendly)  API</li>
  <li>Take inspiration from:
    <ul>
      <li><a href="https://github.com/pyr/mesomatic">pyr’s mesos Java-wrapper library</a></li>
      <li><a href="https://github.com/clojang/jiface">clojang jiface Java-wrapper library</a></li>
      <li><a href="https://github.com/billosys/inet-address">bjorstrom’s inet-address library</a></li>
    </ul>
  </li>
</ul>
<ol>
  <li>Support both TCP and UDP sockets</li>
</ol>
<ul>
  <li>Other libraries have focused on supporting TCP primarily</li>
  <li>We have a need for UDP servers</li>
  <li>We’ll focus there first, then then catch up with TCP later</li>
</ul>
<ol>
  <li>Read the Java docs carefully</li>
</ol>
<ul>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/SocketImpl.html">SocketImpl</a>
    <ul>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/Socket.html">Socket</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLSocket.html">SSLSocket</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocketImpl.html">DatagramSocketImpl</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocket.html">DatagramSocket</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/ServerSocket.html">ServerSocket</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLServerSocket.html">SSLServerSocket</a></li>
    </ul>
  </li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/SocketOptions.html">SocketOptions</a></li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html">InetAddress</a>
    <ul>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/Inet4Address.html">Inet4Address</a></li>
      <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/Inet6Address.html">Inet6Address</a></li>
    </ul>
  </li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/SocketAddress.html">SocketAddress</a></li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetSocketAddress.html">InetSocketAddress</a></li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/Proxy.html">Proxy</a></li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/net/DatagramPacket.html">DatagramPacket</a></li>
</ul>
<ol>
  <li>Document a Java example of creating:</li>
</ol>
<ul>
  <li>A UDP socket server</li>
  <li>A UDP socket client</li>
  <li>See <a href="https://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html">Writing a Datagram Client and Server</a>
    <ul>
      <li><a href="https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/networking/datagrams/examples/QuoteServer.java">Server code</a></li>
      <li><a href="https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/networking/datagrams/examples/QuoteServerThread.java">Server thread code</a></li>
      <li><a href="https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/networking/datagrams/examples/QuoteClient.java">Client code</a></li>
    </ul>
  </li>
</ul>
<ol>
  <li>Sketch out how this would be matched in Clojure</li>
</ol>
<ul>
  <li>Check out these:
    <ul>
      <li><a href="https://gist.github.com/dokkarr/acd175677672454499d76110f1fe354e">Echo server with core.async</a></li>
      <li><a href="https://github.com/bguthrie/async-sockets/blob/master/src/com/gearswithingears/async_sockets.clj">async-sockets socket servers</a></li>
      <li><a href="https://github.com/halgari/clojure-conj-2013-core.async-examples/blob/master/src/clojure_conj_talk/core.clj">core.async talk</a> - see the section of code titled “Limited Access to a Shared Resource”</li>
    </ul>
  </li>
</ul>
<ol>
  <li>Wrap the necessary Java classes</li>
  <li>Provide a working example in Clojure of client and server</li>
  <li>Update the example (or create a new one) that would show instead how this  would be done ideally in Clojure</li>
</ol>
<ul>
  <li>Possibly wrap the Clojure wrapper in a higher-level namespace</li>
  <li>Provide a new example that’s simpler to use than the example that is a  straight translation of the Java example</li>
</ul>
<ol>
  <li>Introduce command channels with <code>core.async</code></li>
</ol>
<h3><a href="#clojure-sketch" name="clojure-sketch"></a>Clojure Sketch</h3>
<p><strong>A pre-implementation imagining of creating UDP servers and clients</strong></p>
<pre><code class="clj">(ns socket-server
  (:require
    [systems.billo.datagram.socket :as socket]
    [systems.billo.datagram.packet :as packet]))

(let [skt (socket/create 4445)]

  ...
  (let [pkt (socket/receive skt)
        remote-address (packet/address pkt)
        remote-port (packet/port pkt)
        pkt (packet/new buf (.lenth buf) remote-address remote-port)]
    (socket/send skt pkt)))

</code></pre>
<h2><a href="#second-iteration" name="second-iteration"></a>Second Iteration</h2>
<p>TCP</p>
<h2><a href="#third-iteration" name="third-iteration"></a>Third Iteration</h2>
<p>SSL</p>
<h2><a href="#fourth-iteration" name="fourth-iteration"></a>Fourth Iteration</h2>
<p><code>java.nio</code></p></div></div></div></body></html>